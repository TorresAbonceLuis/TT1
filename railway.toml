[build]
builder = "NIXPACKS"
# Se elimina el comando de activación problemático.
# Usamos 'python3 -m pip' para asegurar que el pip asociado al intérprete de python3 se use.
buildCommand = "python3 -m pip install -r requeriment.txt" 

[deploy]
# El startCommand ya está corregido para usar el módulo de Python.
startCommand = "python3 -m uvicorn main:app --host 0.0.0.0 --port $PORT" 
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[nixpacks]
nixpkgs = [
    "python39",
    "lilypond"
]